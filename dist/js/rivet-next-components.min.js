/*!
* rivet-next-components - @version 0.0.1

* Copyright (C) 2018 The Trustees of Indiana University
* SPDX-License-Identifier: BSD-3-Clause
*/

var RivetNext=function(){"use strict";var n=null;function e(e){var t=e.target.closest("[data-toggle]");if(t){n&&t.dataset.toggle!==n&&i(n);var r=t.getAttribute("aria-expanded"),a=t.dataset.toggle;"false"==r?o(a):i(a)}else n&&!e.target.closest("#"+n)&&i(n)}function a(e){return{trigger:document.querySelector('[data-toggle="'.concat(e,'"]')),elementToToggle:document.getElementById(e)}}function o(e){var t=a(e),r=new CustomEvent("rvt:toggleShow",{bubbles:!0,cancelable:!0,detail:{elementId:t.elementToToggle.id}});t.elementToToggle.dispatchEvent(r)&&(t.trigger.setAttribute("aria-expanded","true"),t.elementToToggle.classList.add("rvt-display-block"),n=e)}function i(e){var t=a(e),r=new CustomEvent("rvt:toggleHide",{bubbles:!0,cancelable:!0,detail:{elementId:t.elementToToggle.id}});t.elementToToggle.dispatchEvent(r)&&(t.trigger.setAttribute("aria-expanded","false"),t.elementToToggle.classList.remove("rvt-display-block"),n=null)}var s,c,t={init:function(){document.addEventListener("click",e,!1)},destroy:function(){document.removeEventListener("click",e,!1)},showElement:o,hideElement:i},g={up:38,down:40,tab:9,escape:27},l='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]',f="data-sidenav-toggle",r=document.querySelectorAll("[data-sidenav-toggle]"),d=document.querySelectorAll("[data-sidenav-toggle] + .rvt-sidenav__list");function v(e,t){if(!e)throw new Error("You must provide a unique id for the menu you're trying to open.");var r="["+f+'="'+(c=e)+'"]',a=document.querySelector(r);if(!a.hasAttribute("disabled")){a&&null!==a&&(a.setAttribute("aria-expanded","true"),s=a);var n=document.getElementById(e);if(!n)throw new Error('There was no menu found with an id attribute that matches the "data-sidenav-toggle" attribute on the dropdown toggle.');n.setAttribute("aria-hidden","false"),fireCustomEvent(a,f,"dropdownOpen"),t&&"function"==typeof t&&t()}}function b(e,t){if(!e)throw new Error("You must provide a unique id for the menu you're trying to close.");var r=document.querySelector("["+f+'="'+e+'"]');if(!r.hasAttribute("disabled")){r&&void 0!==r&&r.setAttribute("aria-expanded","false");var a=document.getElementById(e);if(!a){if(e)return;throw new Error('There was no menu found with an id attribute that matches the "data-sidenav-toggle" attribute on the dropdown toggle.')}a.setAttribute("aria-hidden","true"),fireCustomEvent(r,f,"dropdownClose"),t&&"function"==typeof t&&t()}}function m(e){var t={},r=Array.prototype.slice.call(e.querySelectorAll(l));return t.all=r,t.first=r[0],t.last=r[r.length-1],t}function u(e){var t=e.target.closest("["+f+"]");if(t){var r=t.getAttribute(f),a=t.getAttribute("data-sidenav-toggle"),n=document.querySelector('[id="'+a+'"]');if(""===n.getAttribute("id"))throw new Error("The toggle that was clicked is not linked with a menu.");"true"===n.getAttribute("aria-hidden")?v(r):b(r)}}function h(e){switch(e.keyCode){case g.down:e.preventDefault();var t=e.target.closest("["+f+"]");if(t&&null!==t){var r=t.getAttribute(f),a=document.getElementById(r);if("true"===t.getAttribute("aria-expanded")){var n=m(a);n.first.focus()}v(r)}if(null!==e.target.closest("#"+c)){var o,i=e.target.closest("#"+c);n=m(i);for(var l=0;l<n.all.length;l++)e.target==n.all[l]&&(o=l);var d=n.all[o+1];if(!d)return void n.first.focus();d.focus()}break;case g.up:if(e.preventDefault(),null!==e.target.closest("#"+c)){for(n=m(i=e.target.closest("#"+c)),l=0;l<n.all.length;l++)e.target==n.all[l]&&(o=l);var u=n.all[o-1];if(!u&&void 0!==n.last)return void n.last.focus();u.focus()}break;case g.escape:c&&b(c),s&&null!==s&&s.focus(),s=c=null;break;case g.tab:if(null!==e.target.closest("#"+c))for(n=m(i=e.target.closest("#"+c)),l=0;l<n.all.length;l++)e.target==n.all[l]&&(o=l)}}function p(e){void 0===e&&(e=document),e.removeEventListener("click",u,!1),e.removeEventListener("keydown",h,!1)}return{toggle:t,sidenav:{openMenu:v,closeMenu:b,init:function(e){void 0===e&&(e=document),Array.prototype.slice.call(r).forEach(function(e){"true"!=e.getAttribute("aria-expanded")?e.setAttribute("aria-expanded","false"):e.setAttribute("aria-haspopup","true")}),Array.prototype.slice.call(d).forEach(function(e){"false"!=e.getAttribute("aria-hidden")&&e.setAttribute("aria-hidden","true")}),p(e),e.addEventListener("click",u,!1),e.addEventListener("keydown",h,!1)},destroy:p}}}();